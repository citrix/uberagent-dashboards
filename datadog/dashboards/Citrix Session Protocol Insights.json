{"title":"Citrix Session Protocol Insights","description":"This dashboard displays detailed information about Citrix HDX virtual channels and network metrics.","widgets":[{"id":534871208025260,"definition":{"type":"free_text","text":"Citrix session overview","color":"#4d4d4d","font_size":"auto","text_align":"left"},"layout":{"x":0,"y":0,"width":12,"height":1}},{"id":3436479214903872,"definition":{"type":"free_text","text":"This dashboard displays detailed information about Citrix HDX virtual channels and network metrics.\n\n\n\n\n\n\n\n","color":"#4d4d4d","font_size":"16","text_align":"left"},"layout":{"x":0,"y":1,"width":12,"height":1}},{"id":7774317388102314,"definition":{"title":"#Hosts:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"host"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\""},"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":0,"y":2,"width":4,"height":1}},{"id":786712950991008,"definition":{"title":"#Users:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"@SessionUser"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\""},"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":4,"y":2,"width":4,"height":1}},{"id":6315168403677276,"definition":{"title":"#Sessions:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"@SessionGUID"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\""},"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":8,"y":2,"width":4,"height":1}},{"id":7426698656632670,"definition":{"title":"Avg. session data volume:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"alias":"AvgSessionDataVolumeMB","number_format":{"unit":{"type":"canonical_unit","unit_name":"megabyte"}},"formula":"query1 / query3"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\""},"storage":"hot"},{"data_source":"logs","name":"query3","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"@SessionGUID"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\""},"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"precision":2,"timeseries_background":{"type":"area"}},"layout":{"x":0,"y":3,"width":4,"height":1}},{"id":5504687798240428,"definition":{"title":"Avg. ICA latency:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1","number_format":{"unit":{"type":"canonical_unit","unit_name":"millisecond"}}}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRpLatencyMs"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 @SessionProtocol:ICA"},"storage":"hot"}],"response_format":"scalar"}],"autoscale":false,"precision":1,"timeseries_background":{"type":"bars"}},"layout":{"x":4,"y":3,"width":4,"height":1}},{"id":6467449888103348,"definition":{"title":"Avg. ICA round-trip time:","title_size":"16","title_align":"left","type":"query_value","requests":[{"formulas":[{"formula":"query1","number_format":{"unit":{"type":"canonical_unit","unit_name":"millisecond"}}}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRoundTripTimeMs"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 @SessionProtocol:ICA"},"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"precision":1,"timeseries_background":{"type":"bars"}},"layout":{"x":8,"y":3,"width":4,"height":1}},{"id":8389915727011090,"definition":{"title":"Data volume","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"},"group_by":[{"facet":"@User","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"host","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"@SessionGUID","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"},{"data_source":"logs","name":"query2","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeOutputMB"},"group_by":[{"facet":"@User","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"host","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"@SessionGUID","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"},{"data_source":"logs","name":"query3","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputMB"},"group_by":[{"facet":"@User","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"host","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"@SessionGUID","limit":15,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"}],"response_format":"scalar","sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"cell_display_mode":"bar","alias":"Input+Output (MB)","formula":"query1"},{"alias":"Output volume (MB)","formula":"query2"},{"alias":"Input volume (MB)","formula":"query3"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":4,"width":6,"height":4}},{"id":8999803546701746,"definition":{"title":"Network","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRpLatencyMs"},"group_by":[{"facet":"@User","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}},{"facet":"host","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}},{"facet":"@SessionGUID","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 $host"},"storage":"hot"},{"data_source":"logs","name":"query2","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRoundTripTimeMs"},"group_by":[{"facet":"@User","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}},{"facet":"host","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}},{"facet":"@SessionGUID","limit":10,"sort":{"order":"desc","aggregation":"avg","metric":"@SessionRpLatencyMs"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 $host"},"storage":"hot"}],"response_format":"scalar","sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"cell_display_mode":"bar","alias":"Avg. ICA latency (ms)","formula":"query1"},{"cell_display_mode":"bar","alias":"Avg. ICA round-trip time (ms)","formula":"query2"}]}],"has_search_bar":"auto"},"layout":{"x":6,"y":4,"width":6,"height":4}},{"id":5383946624084774,"definition":{"title":"Session data volume over time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Input volume (MB)","formula":"query1"},{"alias":"Output volume (MB)","formula":"query2"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputMB"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:uberAgent\\:CitrixSession\\:* $host"},"storage":"hot"},{"data_source":"logs","name":"query2","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeOutputMB"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:uberAgent\\:CitrixSession\\:* $host"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"layout":{"x":0,"y":8,"width":6,"height":3}},{"id":930539884059416,"definition":{"title":"Average ICA latency/ICA RTT over time","title_size":"16","title_align":"left","show_legend":true,"legend_layout":"auto","legend_columns":["avg","min","max","value","sum"],"type":"timeseries","requests":[{"formulas":[{"alias":"Avg. ICA latency (ms)","formula":"query1"},{"alias":"Avg. ICA round-trip time (ms)","formula":"query2"}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRpLatencyMs"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 @SessionProtocol:ICA $host"},"storage":"hot"},{"data_source":"logs","name":"query2","indexes":["*"],"compute":{"aggregation":"avg","metric":"@SessionRoundTripTimeMs"},"group_by":[],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:Session:SessionDetail\" -@SessionID:0 @SessionProtocol:ICA $host"},"storage":"hot"}],"response_format":"timeseries","style":{"palette":"dog_classic","order_by":"values","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"layout":{"x":6,"y":8,"width":6,"height":3}},{"id":602525803800072,"definition":{"title":"Virtual channel usage","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"@VirtualChannel"},"group_by":[],"search":{"query":"@sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"},{"data_source":"logs","name":"query2","indexes":["*"],"compute":{"aggregation":"cardinality","metric":"@VirtualChannel"},"group_by":[],"search":{"query":"@sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" -@VirtualChannelDataVolumeInputOutputMB:0 $host"},"storage":"hot"}],"response_format":"scalar","sort":{"count":500,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"cell_display_mode":"bar","alias":"Virtual Channels in use","formula":"query2"},{"alias":"Virtual Channels not in use","formula":"query1 - query2"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":11,"width":6,"height":3}},{"id":3417912932626518,"definition":{"title":"Virtual Channel list by Data Volume","title_size":"16","title_align":"left","type":"toplist","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"},"group_by":[{"facet":"@VirtualChannel","limit":10,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}}],"search":{"query":"@sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"}],"response_format":"scalar","formulas":[{"formula":"query1"}],"sort":{"count":10,"order_by":[{"type":"formula","index":0,"order":"desc"}]}}],"style":{"display":{"type":"stacked","legend":"automatic"}}},"layout":{"x":6,"y":11,"width":6,"height":3}},{"id":2161401805576488,"definition":{"title":"Data table","title_size":"16","title_align":"left","type":"query_table","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"},"group_by":[{"facet":"host","limit":10,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}},{"facet":"@User","limit":10,"sort":{"order":"desc","aggregation":"sum","metric":"@VirtualChannelDataVolumeInputOutputMB"}}],"search":{"query":"service:uberAgent @sourcetype:\"uberAgent:CitrixSession:VirtualChannelDetail\" $host"},"storage":"hot"}],"response_format":"scalar","sort":{"count":100,"order_by":[{"type":"formula","index":0,"order":"desc"}]},"formulas":[{"cell_display_mode":"bar","alias":"Virtual Channel Total Data Volume (MB)","formula":"query1"}]}],"has_search_bar":"auto"},"layout":{"x":0,"y":14,"width":12,"height":4}}],"template_variables":[{"name":"host","prefix":"host","available_values":[],"default":"*"}],"layout_type":"ordered","notify_list":[],"reflow_type":"fixed"}